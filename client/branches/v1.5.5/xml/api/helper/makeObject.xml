<f:transaction
	xmlns:f="http://www.filmsfolded.com/xsl/ui"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

	<f:param name="type" />
	<f:param name="parentSituation" />
	<xsl:template>
		<f:transaction>
			<f:make type="{$type/@value}" name="o" />
			<xsl:if test="$parentSituation">
				<f:intact with-var="o" prop="parentSituation" action="set">
					<f:with-param value-id="{$parentSituation/@id}" />
				</f:intact>
				<f:intact with-id="{$parentSituation/@id}" prop="childObjects" action="add">
					<f:with-param value-var="o" />
				</f:intact>
			</xsl:if>
			<f:return as="o" value-var="o" />
		</f:transaction>
	</xsl:template>
</f:transaction>