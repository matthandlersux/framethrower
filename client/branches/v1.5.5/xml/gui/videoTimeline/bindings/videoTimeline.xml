<f:binding
	xmlns:f="http://www.filmsfolded.com/xsl/ui"
	xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
	
	<!-- <f:transaction name="Display Containing Situation" event="mouseover"> -->
	<f:transaction name="Preview Frame" event="mousemove">
		<f:param name="videoTimeline" />
		<f:param name="eventXML" />
		<f:derived name="embedVideo" from="videoTimeline">
			<f:get what="embedVideo" />
		</f:derived>
		<f:derived name="video" from="videoTimeline">
			<f:get what="video" />
		</f:derived>
		<f:derived name="duration" from="video">
			<f:get what="duration" />
		</f:derived>
		
		<xsl:template>
			<f:transaction>
				<xsl:variable name="ratio" select="($eventXML/@clientX - $eventXML/@boundingLeft) div ($eventXML/@boundingRight - $eventXML/@boundingLeft)" />
				<xsl:variable name="time" select="$duration/@value * $ratio" />
				
				<f:intact with-id="{$embedVideo/@id}" prop="gotoTime" action="set">
					<f:with-param><f:number value="{$time}" /></f:with-param>
				</f:intact>
			</f:transaction>
		</xsl:template>
	</f:transaction>
	
	<f:transaction name="Select Start Time" event="mousedown">
		<f:param name="videoTimeline" />
		<f:param name="eventXML" />
		<f:derived name="video" from="videoTimeline">
			<f:get what="video" />
		</f:derived>
		<f:derived name="duration" from="video">
			<f:get what="duration" />
		</f:derived>
		
		<xsl:template>
			<f:transaction>
				<xsl:variable name="ratio" select="($eventXML/@clientX - $eventXML/@boundingLeft) div ($eventXML/@boundingRight - $eventXML/@boundingLeft)" />
				<xsl:variable name="time" select="$duration/@value * $ratio" />
				
				<f:intact with-id="{$videoTimeline/@id}" prop="selectedStartTime" action="set">
					<f:with-param><f:number value="{$time}" /></f:with-param>
				</f:intact>
				<f:intact with-id="{$videoTimeline/@id}" prop="selectedEndTime" action="set">
					<f:with-param />
				</f:intact>
			</f:transaction>
		</xsl:template>
	</f:transaction>
	
	<f:transaction name="Select End Time" event="mouseDrag">
		<f:param name="videoTimeline" />
		<f:param name="eventXML" />
		<f:derived name="video" from="videoTimeline">
			<f:get what="video" />
		</f:derived>
		<f:derived name="duration" from="video">
			<f:get what="duration" />
		</f:derived>
		
		<xsl:template>
			<f:transaction>
				<xsl:variable name="ratio" select="($eventXML/@clientX - $eventXML/@boundingLeft) div ($eventXML/@boundingRight - $eventXML/@boundingLeft)" />
				<xsl:variable name="time" select="$duration/@value * $ratio" />

				<f:intact with-id="{$videoTimeline/@id}" prop="selectedEndTime" action="set">
					<f:with-param><f:number value="{$time}" /></f:with-param>
				</f:intact>
			</f:transaction>
		</xsl:template>
	</f:transaction>
	
</f:binding>