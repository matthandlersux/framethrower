<f:function
	xmlns:f="http://www.filmsfolded.com/xsl/ui"
	xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
	xmlns:html="http://www.w3.org/1999/xhtml"
	xmlns:svg="http://www.w3.org/2000/svg">

	<f:param name="width" />
	<f:param name="height" />
	<f:param name="offsetX" />
	<f:param name="offsetY" />
	<f:param name="blurAmount" />
	
	<xsl:template>
		<xsl:variable name="w" select="$width/@value" />
		<xsl:variable name="h" select="$height/@value" />
		<xsl:variable name="b" select="$blurAmount/@value" />
		
		<html:div left="{$offsetX/@value - $b * 3}" top="{$offsetY/@value - $b * 3}" width="{$w + $b * 6}" height="{$h + $b * 6}">
			<svg:svg width="{$w + $b * 6}" height="{$h + $b * 6}">
				<svg:filter id="blur" width="150%" height="150%">
					<svg:feGaussianBlur in="SourceGraphic" stdDeviation="{$b}" />
				</svg:filter>
				<svg:rect x="{$b * 3}" y="{$b * 3}" width="{$w}" height="{$h}" fill="black" filter="url(#blur)" />
			</svg:svg>
		</html:div>
	</xsl:template>
</f:function>