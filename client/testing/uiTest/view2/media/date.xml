<f:template name="testTemplate"
	xmlns:f="http://www.worldmerge.com/2008/xsl"
	xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
	xmlns:html="http://www.w3.org/1999/xhtml"
	xmlns:svg="http://www.w3.org/2000/svg">
	
	<f:param name="focus" type="X.date" />
	
	<f:derive name="day" d="X.date:day focus" />
	
	<f:thunk with-template="$draw">
		<f:with-param name="months">
			<months>
				<m day="-92" month="Oct 99" />
				<m day="-61" month="Nov 99" />
				<m day="-31" month="Dec 99" />
				<m day="0" month="Jan 00" />
				<m day="31" month="Feb 00" />
				<m day="60" month="Mar 00" />
				<m day="91" month="Apr 00" />
				<m day="121" month="May 00" />
				<m day="152" month="Jun 00" />
				<m day="182" month="Jul 00" />
				<m day="213" month="Aug 00" />
				<m day="244" month="Sep 00" />
				<m day="274" month="Oct 00" />
				<m day="305" month="Nov 00" />
				<m day="335" month="Dec 00" />
				<m day="366" month="Jan 01" />
				<m day="397" month="Feb 01" />
				<m day="425" month="Mar 01" />
			</months>
		</f:with-param>
	</f:thunk>
	
	<f:template name="draw">
		<f:param name="months" type="XML" />
		<html:span class="text">
			<f:each select="$day">
				<xsl:variable name="month" select="$months/*/*[@day &lt; $day/@value][last()]" />
				<xsl:variable name="d" select="$day/@value - $month/@day" />
				<xsl:variable name="m" select="$month/@month" />
				
				<xsl:value-of select="concat($d, ' ', $m)" />
			</f:each>
		</html:span>
	</f:template>
	

</f:template>