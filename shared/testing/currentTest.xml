<tests>
	<test name='sortedFoldTest1'>
		<startcap name='sc' type='set number' />
		<messages>
			<set scname = 'sc'>
				<number value='1' />
			</set>
			<set scname = 'sc'>
				<number value='7' />
			</set>
			<set scname = 'sc'>
				<number value='3' />
			</set>
		</messages>
	
		<endcap name = 'ec' expression = 'sortedFold true add 0 sc' />

		<expectedmessages>
			<set ecname = 'ec' >
				<number value = '11' />
			</set>
		</expectedmessages>

		<messages>
			<set scname = 'sc'>
				<number value='2' />
			</set>
		</messages>

		<expectedmessages>
			<remove ecname = 'ec' >
				<number value = '11' />
			</remove>
			<set ecname = 'ec' >
				<number value = '13' />
			</set>
		</expectedmessages>
		
		<messages>
			<remove scname = 'sc'>
				<number value='3' />
			</remove>
		</messages>
		
		<expectedmessages>
			<remove ecname = 'ec' >
				<number value = '13' />
			</remove>
			<set ecname = 'ec' >
				<number value = '10' />
			</set>
		</expectedmessages>
		
	</test>

</tests>