<f:template name="testTemplate"
	xmlns:f="http://www.worldmerge.com/2008/xsl"
	xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
	xmlns:html="http://www.w3.org/1999/xhtml"
	xmlns:svg="http://www.w3.org/2000/svg">
	
	<f:param name="focus" type="Cons" />
	<f:param name="clickAction" type="a -> Unit JS" />
	<f:derive name="infonArgs" d="getInfonArguments focus" />
	<f:derive name="template" d="(bindSet getRelationTemplate) (getInfonRelations focus)" />
	
	<!-- <f:derive name="relations" d="getInfonRelations focus" /> -->
	
	<!-- <f:derive name="relation" d="getInfonRelation focus" />
	<f:derive name="relations" d="getInfonRelations focus" />
	<f:derive name="consComponents" d="getConsComponents focus" />
	<f:derive name="last" d="takeLast consComponents" /> -->

	
	<!-- Infon: <xsl:value-of select="$focus/@name" /><html:br /> -->
	<!-- args:
	<xsl:call-template name="prettyPrint">
		<xsl:with-param name="node" select="$infonArgs" />
	</xsl:call-template>-->
	<!-- relation:
	<xsl:call-template name="prettyPrint">
		<xsl:with-param name="node" select="$template" />
	</xsl:call-template> -->
	
	<!-- <f:thunk with-template="$viewRelation">
		<f:with-param name="relation" select="$relation" />
	</f:thunk> -->
	
	<!-- <xsl:value-of select="$focus/@name" /> -->
	
	<xsl:variable name="rt" select="$template/f:literal/f:relationTemplate" />
	<xsl:if test="$rt">
		<xsl:call-template name="print">
			<xsl:with-param name="relationTemplate" select="$rt" />
			<xsl:with-param name="infonArgs" select="$infonArgs" />
			<xsl:with-param name="argTemplate" select="$printArg" />
		</xsl:call-template>
	</xsl:if>
	
	<f:template name="printArg">
		<f:param name="focus" type="Object" />
		<f:param name="num" type="Number" />
		
		<f:thunk url="view.xml">
			<f:with-param name="focus" select="$focus" />
			<f:with-param name="clickAction" select="$clickAction" />
		</f:thunk>
	</f:template>
	
	<!-- <xsl:call-template name="prettyPrint">
		<xsl:with-param name="node" select="$infonArgs" />
	</xsl:call-template> -->
	

	<f:include url="util/printInfon.xml" />
	
	<f:include url="/xml/debug/prettyPrint.xml" />
</f:template>