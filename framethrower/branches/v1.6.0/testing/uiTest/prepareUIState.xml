<f:action name="prepareState"
	xmlns:f="http://www.worldmerge.com/2008/xsl"
	xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
	xmlns:html="http://www.w3.org/1999/xhtml"
	xmlns:svg="http://www.w3.org/2000/svg">
	
	<f:derive name="in" d="shared.in" />
	<f:derive name="isA" d="shared.isA" />
	<f:derive name="name" d="shared.name" />
	
	<f:derive name="ont" d="shared.ont" />
	<f:derive name="realLife" d="shared.realLife" />
	<f:derive name="situationType" d="shared.type.situation" />
	<f:derive name="entityType" d="shared.type.entity" />
	
	<f:derive name="movieType" d="shared.type.movie" />
	<f:derive name="locationType" d="shared.type.location" />
	<f:derive name="agentType" d="shared.type.agent" />
	

	<f:derive name="prefs" d="ui.prefs" />
	
	<f:derive name="situationType" d="shared.type.situation" />
	<f:derive name="entityType" d="shared.type.entity" />
	<f:derive name="relationType" d="shared.type.relation" />
	<f:intact object="$prefs" property="typeDisplay" action="add" key="$situationType" value="'#2ae'" />
	<f:intact object="$prefs" property="typeDisplay" action="add" key="$entityType" value="'#5a1'" />
	<f:intact object="$prefs" property="typeDisplay" action="add" key="$relationType" value="'#e29'" />
	
	<f:intact object="$prefs" property="typeDisplay" action="add" key="$movieType" value="'#a22'" />
	<f:intact object="$prefs" property="typeDisplay" action="add" key="$locationType" value="'#829'" />
	<f:intact object="$prefs" property="typeDisplay" action="add" key="$agentType" value="'#9e1'" />
	
	
	<f:derive name="movieStory" d="shared.movie.story" />
	<f:derive name="moviePresentation" d="shared.movie.presentation" />
	<f:derive name="movieMaking" d="shared.movie.making" />
	<f:intact object="$prefs" property="timelineLayers" action="add" key="'b'" value="$movieStory" />
	<f:intact object="$prefs" property="timelineLayers" action="add" key="'bb'" value="$moviePresentation" />
	<f:intact object="$prefs" property="timelineLayers" action="add" key="'bbb'" value="$movieMaking" />
	
	
	
	<!-- <f:derive name="main" d="ui.main" />
	
	<f:create type="UI.pane.set" name="paneSet" />
	
	<f:create type="UI.pane.pane" name="mainPane" />
	<f:intact object="$mainPane" property="focus" action="add" key="$realLife" />
	
	<f:intact object="$paneSet" property="panes" action="add" key="'b'" value="$mainPane" />
	
	
	<f:intact object="$main" property="pane" action="add" key="$paneSet" /> -->
	
	<f:derive name="mainPaneSet" d="ui.mainPaneSet" />
	<f:derive name="columns" d="ui.mainPaneSet.columns" />
	
	<f:intact object="$mainPaneSet" property="orientation" action="add" key="'vertical'" />
	
	<!-- <f:create type="UI.pane.set" name="columns" /> -->
	<f:intact object="$columns" property="orientation" action="add" key="'horizontal'" />
	
	<f:create type="UI.pane.pane" name="mainPane" />
	<f:intact object="$mainPane" property="focus" action="add" key="$realLife" />
	
	<f:intact object="$columns" property="panes" action="add" key="'b'" value="$mainPane" />
	
	
	<f:derive name="walleMovie" d="shared.test.walleMovie" />
	<f:create type="UI.pane.timeline" name="timeline">
		<f:with-param name="focus" select="$walleMovie" />
	</f:create>
	<f:intact object="$timeline" property="height" action="add" key="180" />
	<f:intact object="$timeline" property="zoomWidth" action="add" key="4000" />
	
	<!-- <f:create type="UI.pane.pane" name="timeline" />
	<f:intact object="$timeline" property="focus" action="add" key="$realLife" />
	<f:intact object="$timeline" property="height" action="add" key="200" /> -->

	
	<f:intact object="$mainPaneSet" property="panes" action="add" key="'b'" value="$columns" />
	<f:intact object="$mainPaneSet" property="panes" action="add" key="'bb'" value="$timeline" />



	<!-- <f:perform with-action="$showPopup">
		<f:with-param name="x" select="100" as="Number" />
		<f:with-param name="y" select="100" as="Number" />
		<f:with-param name="width" select="500" as="Number" />
		<f:with-param name="height" select="300" as="Number" />
		<f:with-param name="content" select="$test" />
	</f:perform>

	<f:template name="test">
		<f:derive name="relationCreator" d="test.relationCreator" />
		<f:thunk url="relationCreator/relationCreator.xml">
			<f:with-param name="relationCreator" select="$relationCreator" />
		</f:thunk>
	</f:template> -->
	
	<f:include url="/xml/util/uiActions.xml" />

</f:action>