<f:action name="prepareState"
	xmlns:f="http://www.worldmerge.com/2008/xsl"
	xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
	xmlns:html="http://www.w3.org/1999/xhtml"
	xmlns:svg="http://www.w3.org/2000/svg">
	
	<f:derive name="in" d="shared.in" />
	<f:derive name="isA" d="shared.isA" />
	<f:derive name="name" d="shared.name" />
	
	<f:derive name="ont" d="shared.ont" />
	<f:derive name="realLife" d="shared.realLife" />
	<f:derive name="situationType" d="shared.type.situation" />
	<f:derive name="entityType" d="shared.type.entity" />
	<f:derive name="infonType" d="shared.type.infon" />
	<f:derive name="polyA" d="shared.type.poly.a" />
	<f:derive name="typeType" d="shared.type.type" />
	
	
	
	<f:perform with-action="$nameObject">
		<f:with-param name="object" select="$situationType" />
		<f:with-param name="name" select="'Situation'" />
	</f:perform>
	<f:perform with-action="$nameObject">
		<f:with-param name="object" select="$entityType" />
		<f:with-param name="name" select="'Entity'" />
	</f:perform>
	<f:perform with-action="$typeObject">
		<f:with-param name="object" select="$entityType" />
		<f:with-param name="type" select="$typeType" />
	</f:perform>
	
	
	<f:perform with-action="$nameObject">
		<f:with-param name="object" select="$realLife" />
		<f:with-param name="name" select="'Real Life'" />
	</f:perform>
	<f:perform with-action="$typeObject">
		<f:with-param name="object" select="$realLife" />
		<f:with-param name="type" select="$situationType" />
	</f:perform>
	
	
	<f:perform with-action="$nameObject">
		<f:with-param name="object" select="$ont" />
		<f:with-param name="name" select="'Ontological Layer'" />
	</f:perform>
	<f:perform with-action="$typeObject">
		<f:with-param name="object" select="$ont" />
		<f:with-param name="type" select="$situationType" />
	</f:perform>
	
	
	<f:perform with-action="$nameObject">
		<f:with-param name="object" select="$situationType" />
		<f:with-param name="name" select="'Situation'" />
	</f:perform>
	<f:perform with-action="$typeObject">
		<f:with-param name="object" select="$situationType" />
		<f:with-param name="type" select="$typeType" />
	</f:perform>
	

	
	
	<f:perform with-action="$relationTemplateObject">
		<f:with-param name="object" select="$in" />
		<f:with-param name="relTem">
			<f:relationTemplate>
				<f:row>in <f:arg num="1" /></f:row>
				<f:row><f:arg num="2" /></f:row>
			</f:relationTemplate>
		</f:with-param>
	</f:perform>
	<f:perform with-action="$makeRelationType2" name="situationToAToA">
		<f:with-param name="input1" select="$situationType" />
		<f:with-param name="input2" select="$polyA" />
		<f:with-param name="output" select="$polyA" />
	</f:perform>
	<f:perform with-action="$typeObject">
		<f:with-param name="object" select="$in" />
		<f:with-param name="type" select="$situationToAToA" />
	</f:perform>
	
	<f:perform with-action="$relationTemplateObject">
		<f:with-param name="object" select="$name" />
		<f:with-param name="relTem">
			<f:relationTemplate>
				<f:arg num="1" /> has name <f:arg num="2" />
			</f:relationTemplate>
		</f:with-param>
	</f:perform>
	
	<f:perform with-action="$relationTemplateObject">
		<f:with-param name="object" select="$isA" />
		<f:with-param name="relTem">
			<f:relationTemplate>
				<f:arg num="1" /> is a <f:arg num="2" />
			</f:relationTemplate>
		</f:with-param>
	</f:perform>
	
	
	
	
	<f:perform with-action="$makeNamedObject" name="sc">
		<f:with-param name="name" select="'Sean Connery'" />
		<f:with-param name="type" select="$entityType" />
	</f:perform>
	<f:perform with-action="$putObjectInSituation">
		<f:with-param name="situation" select="$realLife" />
		<f:with-param name="object" select="$sc" />
	</f:perform>
	
	<f:perform with-action="$makeNamedObject" name="gfmov">
		<f:with-param name="name" select="'Goldfinger'" />
		<f:with-param name="type" select="$situationType" />
	</f:perform>
	<f:perform with-action="$putObjectInSituation">
		<f:with-param name="situation" select="$realLife" />
		<f:with-param name="object" select="$gfmov" />
	</f:perform>
	
	<f:perform with-action="$makeNamedObject" name="jb">
		<f:with-param name="name" select="'James Bond'" />
		<f:with-param name="type" select="$entityType" />
	</f:perform>
	<f:perform with-action="$putObjectInSituation">
		<f:with-param name="situation" select="$gfmov" />
		<f:with-param name="object" select="$jb" />
	</f:perform>
	
	<f:create type="Object" name="performs" />
	<f:perform with-action="$nameObject">
		<f:with-param name="object" select="$performs" />
		<f:with-param name="name" select="'Performs'" />
	</f:perform>
	<f:perform with-action="$relationTemplateObject">
		<f:with-param name="object" select="$performs" />
		<f:with-param name="relTem">
			<f:relationTemplate>
				<f:arg num="1" /> performs <f:arg num="2" />
			</f:relationTemplate>
		</f:with-param>
	</f:perform>
	<f:perform with-action="$makeRelationType2" name="entityToEntityToInfon">
		<f:with-param name="input1" select="$entityType" />
		<f:with-param name="input2" select="$entityType" />
		<f:with-param name="output" select="$infonType" />
	</f:perform>
	<f:perform with-action="$typeObject">
		<f:with-param name="object" select="$performs" />
		<f:with-param name="type" select="$entityToEntityToInfon" />
	</f:perform>
	<f:perform with-action="$putObjectInSituation">
		<f:with-param name="situation" select="$ont" />
		<f:with-param name="object" select="$performs" />
	</f:perform>
	
	<f:create type="Object" name="believes" />
	<f:perform with-action="$nameObject">
		<f:with-param name="object" select="$believes" />
		<f:with-param name="name" select="'Believes'" />
	</f:perform>
	<f:perform with-action="$relationTemplateObject">
		<f:with-param name="object" select="$believes" />
		<f:with-param name="relTem">
			<f:relationTemplate>
				<f:arg num="1" /> believes <f:arg num="2" />
			</f:relationTemplate>
		</f:with-param>
	</f:perform>
	<f:perform with-action="$makeRelationType2" name="entityToSituationToInfon">
		<f:with-param name="input1" select="$entityType" />
		<f:with-param name="input2" select="$situationType" />
		<f:with-param name="output" select="$infonType" />
	</f:perform>
	<f:perform with-action="$typeObject">
		<f:with-param name="object" select="$believes" />
		<f:with-param name="type" select="$entityToSituationToInfon" />
	</f:perform>
	<f:perform with-action="$putObjectInSituation">
		<f:with-param name="situation" select="$ont" />
		<f:with-param name="object" select="$believes" />
	</f:perform>
	
	<f:create type="Object" name="gives" />
	<f:perform with-action="$nameObject">
		<f:with-param name="object" select="$gives" />
		<f:with-param name="name" select="'Gives ... to'" />
	</f:perform>
	<f:perform with-action="$relationTemplateObject">
		<f:with-param name="object" select="$gives" />
		<f:with-param name="relTem">
			<f:relationTemplate>
				<f:arg num="1" /> gives <f:arg num="2" /> to <f:arg num="3" />
			</f:relationTemplate>
		</f:with-param>
	</f:perform>
	<f:perform with-action="$makeRelationType3" name="entityToEntityToEntityToInfon">
		<f:with-param name="input1" select="$entityType" />
		<f:with-param name="input2" select="$entityType" />
		<f:with-param name="input3" select="$entityType" />
		<f:with-param name="output" select="$infonType" />
	</f:perform>
	<f:perform with-action="$typeObject">
		<f:with-param name="object" select="$gives" />
		<f:with-param name="type" select="$entityToEntityToEntityToInfon" />
	</f:perform>
	<f:perform with-action="$putObjectInSituation">
		<f:with-param name="situation" select="$ont" />
		<f:with-param name="object" select="$gives" />
	</f:perform>
	
	
	
	
	
	
	<f:perform with-action="$makeInfon2" name="jbingfmov">
		<f:with-param name="relation" select="$in" />
		<f:with-param name="arg1" select="$gfmov" />
		<f:with-param name="arg2" select="$jb" />
	</f:perform>
	<f:perform with-action="$makeInfon2" name="scperformsjb">
		<f:with-param name="relation" select="$performs" />
		<f:with-param name="arg1" select="$sc" />
		<f:with-param name="arg2" select="$jbingfmov" />
	</f:perform>
	<f:perform with-action="$putObjectInSituation">
		<f:with-param name="situation" select="$realLife" />
		<f:with-param name="object" select="$scperformsjb" />
	</f:perform>
	
	
	
	
	<f:perform with-action="$makeNamedObject" name="charlene">
		<f:with-param name="name" select="'Charlene'" />
		<f:with-param name="type" select="$entityType" />
	</f:perform>
	<f:perform with-action="$putObjectInSituation">
		<f:with-param name="situation" select="$realLife" />
		<f:with-param name="object" select="$charlene" />
	</f:perform>
	<f:perform with-action="$thumbnailObject">
		<f:with-param name="object" select="$charlene" />
		<f:with-param name="url" select="'https://private.eversplosion.com/files/photos/yangIMG_1007.jpg'" />
		<f:with-param name="width" select="2448" />
		<f:with-param name="height" select="3264" />
	</f:perform>
	


	<f:action name="makeRelationType3">
		<f:param name="input1" type="Object" />
		<f:param name="input2" type="Object" />
		<f:param name="input3" type="Object" />
		<f:param name="output" type="Object" />
		
		<f:perform with-action="$makeRelationType" name="rt1">
			<f:with-param name="input" select="$input3" />
			<f:with-param name="output" select="$output" />
		</f:perform>
		<f:perform with-action="$makeRelationType" name="rt2">
			<f:with-param name="input" select="$input2" />
			<f:with-param name="output" select="$rt1" />
		</f:perform>
		<f:perform with-action="$makeRelationType" name="rt3">
			<f:with-param name="input" select="$input1" />
			<f:with-param name="output" select="$rt2" />
		</f:perform>
		<f:return name="rt3" />
	</f:action>	
	
	<f:action name="makeRelationType2">
		<f:param name="input1" type="Object" />
		<f:param name="input2" type="Object" />
		<f:param name="output" type="Object" />
		
		<f:perform with-action="$makeRelationType" name="rt1">
			<f:with-param name="input" select="$input2" />
			<f:with-param name="output" select="$output" />
		</f:perform>
		<f:perform with-action="$makeRelationType" name="rt2">
			<f:with-param name="input" select="$input1" />
			<f:with-param name="output" select="$rt1" />
		</f:perform>
		<f:return name="rt2" />
	</f:action>
	
	<f:action name="makeRelationType">
		<f:param name="input" type="Object" />
		<f:param name="output" type="Object" />
		<f:derive name="relationType" d="shared.type.relation" />
	
		<f:perform with-action="$makeInfon2" name="infon">
			<f:with-param name="relation" select="$relationType" />
			<f:with-param name="arg1" select="$input" />
			<f:with-param name="arg2" select="$output" />
		</f:perform>
		
		<f:return name="infon" />
	</f:action>
	
	
	
	

	
	
	
	<f:include url="/xml/util/actions.xml" />
	
</f:action>