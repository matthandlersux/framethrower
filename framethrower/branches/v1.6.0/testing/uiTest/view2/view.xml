<f:template name="testTemplate"
	xmlns:f="http://www.worldmerge.com/2008/xsl"
	xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
	xmlns:html="http://www.w3.org/1999/xhtml"
	xmlns:svg="http://www.w3.org/2000/svg">
	
	<f:param name="focus" type="Object" />
	<f:param name="recurse" type="a -> Unit JS" />
	
	<f:derive name="asCons" d="Object~Cons focus" />
	<f:derive name="asText" d="Object~X.text focus" />
	<f:derive name="asPicture" d="Object~X.picture focus" />
	<f:derive name="asVideo" d="Object~X.video focus" />
	<f:derive name="asTimeRange" d="Object~X.time.range focus" />
	<f:derive name="asDate" d="Object~X.date focus" />
	
	
	<f:pattern>
		<f:match test="$asCons">
			<f:thunk url="infon.xml">
				<f:with-param name="focus" select="$asCons" />
				<f:with-param name="recurse" select="$recurse" />
			</f:thunk>
		</f:match>
		<f:match test="$asText">
			<f:thunk url="media/text.xml">
				<f:with-param name="focus" select="$asText" />
			</f:thunk>
		</f:match>
		<f:match test="$asPicture">
			<f:thunk url="media/picture.xml">
				<f:with-param name="focus" select="$asPicture" />
				<f:with-param name="transform"><f:transform width="80" height="80" /></f:with-param>
			</f:thunk>
		</f:match>
		<f:match test="$asVideo">
			<f:thunk url="media/video.xml">
				<f:with-param name="focus" select="$asVideo" />
				<f:with-param name="transform"><f:transform width="80" height="80" /></f:with-param>
			</f:thunk>
		</f:match>
		<f:match test="$asTimeRange">
			<f:thunk url="media/timeRange.xml">
				<f:with-param name="focus" select="$asTimeRange" />
			</f:thunk>
		</f:match>
		<f:match test="$asDate">
			<f:thunk url="media/date.xml">
				<f:with-param name="focus" select="$asDate" />
			</f:thunk>
		</f:match>
		<f:otherwise>
			<f:thunk url="object.xml">
				<f:with-param name="focus" select="$focus" />
			</f:thunk>
		</f:otherwise>
	</f:pattern>
	
	
	<!-- <f:choose>
		<f:when test="$asCons">
			<f:each select="$asCons">
				<f:thunk url="infon.xml">
					<f:with-param name="focus" select="$asCons" />
					<f:with-param name="recurse" select="$recurse" />
				</f:thunk>
			</f:each>
		</f:when>
		<f:when test="$asText">
			<f:each select="$asText">
				<f:thunk url="text.xml">
					<f:with-param name="focus" select="$asText" />
					<f:with-param name="recurse" select="$recurse" />
				</f:thunk>
			</f:each>
		</f:when>
		<f:otherwise>
			<f:thunk url="object.xml">
				<f:with-param name="focus" select="$focus" />
			</f:thunk>
		</f:otherwise>
	</f:choose> -->
	
</f:template>