<f:transaction name="transtest"
	xmlns:f="http://www.filmsfolded.com/xsl/ui"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

	<f:param name="parentSituation" />
	
	<xsl:template>
		<transaction>
			<f:perform absurl="xml/api/makeSituation.xml" prefix="sit1">
				<f:with-param name="parentSituation" value-id="{$parentSituation/@id}" />
			</f:perform>
			<f:perform absurl="xml/api/modifyContent.xml">
				<f:with-param name="object" value-var="sit1.o" />
				<f:with-param name="content"><f:string value="Test Situation" /></f:with-param>
			</f:perform>
			
			<f:perform absurl="xml/api/makeSituation.xml" prefix="sit2">
				<f:with-param name="parentSituation" value-id="{$parentSituation/@id}" />
			</f:perform>
			<f:perform absurl="xml/api/modifyContent.xml">
				<f:with-param name="object" value-var="sit2.o" />
				<f:with-param name="content"><f:string value="Test Situation 2" /></f:with-param>
			</f:perform>
				
			
			
			<f:perform absurl="xml/api/makeIndividual.xml" prefix="ind1">
				<f:with-param name="parentSituation" value-var="sit1.o" />
			</f:perform>
			<f:perform absurl="xml/api/modifyContent.xml">
				<f:with-param name="object" value-var="ind1.o" />
				<f:with-param name="content"><f:string value="Test Individual" /></f:with-param>
			</f:perform>
			
			<f:perform absurl="xml/api/makeIndividual.xml" prefix="ind2">
				<f:with-param name="parentSituation" value-var="sit1.o" />
			</f:perform>
			<f:perform absurl="xml/api/modifyContent.xml">
				<f:with-param name="object" value-var="ind2.o" />
				<f:with-param name="content"><f:string value="Test Individual 2" /></f:with-param>
			</f:perform>
			
			<f:perform absurl="xml/api/makeRelation.xml" prefix="rel1">
				<f:with-param name="parentSituation" value-var="sit1.o" />
			</f:perform>			
			<f:perform absurl="xml/api/modifyContent.xml">
				<f:with-param name="object" value-var="rel1.o" />
				<f:with-param name="content">
					<pseudo><role role="performer" /> performs <role role="performee" /></pseudo>
				</f:with-param>
			</f:perform>
			
			
			<f:perform absurl="xml/api/makeInfon.xml" prefix="inf1">
				<f:with-param name="parentSituation" value-var="sit1.o" />
				<f:with-param name="relation" value-var="rel1.o" />
				<f:with-param name="arcs">
					<f:assoc>
						<f:pair>
							<f:key><f:string value="performee" /></f:key>
							<f:value><f:ob var="ind1.o"/></f:value>
						</f:pair>
						<f:pair>
							<f:key><f:string value="performer" /></f:key>
							<f:value><f:ob var="ind2.o"/></f:value>
						</f:pair>
					</f:assoc>
				</f:with-param>
			</f:perform>
			
			
			<f:perform absurl="xml/api/makeIndividual.xml" prefix="ind3">
				<f:with-param name="parentSituation" value-var="sit1.o" />
			</f:perform>
			<f:perform absurl="xml/api/modifyContent.xml">
				<f:with-param name="object" value-var="ind3.o" />
				<f:with-param name="content"><f:string value="Moving Individual" /></f:with-param>
			</f:perform>
			<f:perform absurl="xml/api/moveObject.xml">
				<f:with-param name="object" value-var="ind3.o" />
				<f:with-param name="destination" value-var="sit2.o" />
			</f:perform>
			
		</transaction>
	</xsl:template>
</f:transaction>