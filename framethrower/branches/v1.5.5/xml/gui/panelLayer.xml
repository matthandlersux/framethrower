<f:function
	xmlns:f="http://www.filmsfolded.com/xsl/ui"
	xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
	xmlns:html="http://www.w3.org/1999/xhtml"
	xmlns:svg="http://www.w3.org/2000/svg">

	<f:param name="zui" />
	<f:param name="width" />
	<f:param name="height" />
	<f:param name="panelLayer" />
	<f:param name="addPanel" />	
	
	<f:derived name="properties" from="panelLayer">
		<get what="properties" />
	</f:derived>
	<f:derived name="tooltip" from="panelLayer">
		<get what="tooltip" />
	</f:derived>
	
	
	<xsl:template>
		<html:div>
			<f:thunk url="zui.xml">
				<f:with-param name="zui" value-id="{$zui/@id}" />
				<f:with-param name="width"><xsl:copy-of select="$width" /></f:with-param>
				<f:with-param name="height"><xsl:copy-of select="$height" /></f:with-param>
				<f:with-param name="panelLayer" value-id="{$panelLayer/@id}" />
			</f:thunk>
			
			<xsl:if test="$properties/@addObject='1'">
				<f:thunk url="addObject.xml">
					<f:with-param name="width"><xsl:copy-of select="$width" /></f:with-param>
					<f:with-param name="height"><xsl:copy-of select="$height" /></f:with-param>
					<f:with-param name="panelLayer" value-id="{$panelLayer/@id}" />
					<f:with-param name="addPanel" value-id="{$addPanel/@id}" />
				</f:thunk>
			</xsl:if>

			<xsl:if test="$properties/@addCorresponds='1'">
				<f:thunk url="addCorresponds.xml">
					<f:with-param name="width"><xsl:copy-of select="$width" /></f:with-param>
					<f:with-param name="height"><xsl:copy-of select="$height" /></f:with-param>
					<f:with-param name="panelLayer" value-id="{$panelLayer/@id}" />
				</f:thunk>
			</xsl:if>
			
			<xsl:if test="$properties/@addInfon='1'">
				<f:thunk url="addInfon.xml">
					<f:with-param name="width"><xsl:copy-of select="$width" /></f:with-param>
					<f:with-param name="height"><xsl:copy-of select="$height" /></f:with-param>
					<f:with-param name="panelLayer" value-id="{$panelLayer/@id}" />
					<f:with-param name="addPanel" value-id="{$addPanel/@id}" />
				</f:thunk>
			</xsl:if>
			
			<xsl:if test="$tooltip">
				<f:thunk url="tooltip.xml">
					<f:with-param name="width"><xsl:copy-of select="$width" /></f:with-param>
					<f:with-param name="height"><xsl:copy-of select="$height" /></f:with-param>
					<f:with-param name="tooltip"><xsl:copy-of select="$tooltip" /></f:with-param>
				</f:thunk>
			</xsl:if>
			
		</html:div>
	</xsl:template>
	
	
</f:function>