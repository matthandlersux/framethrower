<f:function
	xmlns:f="http://www.filmsfolded.com/xsl/ui"
	xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
	xmlns:html="http://www.w3.org/1999/xhtml"
	xmlns:svg="http://www.w3.org/2000/svg">

	<f:param name="tooltip" />
	<f:param name="width" />
	<f:param name="height" />
	
	<f:derived name="tooltipType" from="tooltip">
		<gettype />
	</f:derived>
	
	<f:derived name="mousePositionX" predef="mousePositionX">
		
	</f:derived>
	<f:derived name="mousePositionY" predef="mousePositionY">
		
	</f:derived>
	
	
	<xsl:template>
		<xsl:variable name="offsetX" select="4" />
		<xsl:variable name="offsetY" select="14" />
		<html:div>
			<html:div class="tooltip" style="left:{$mousePositionX/@value + $offsetX}px; top: {$mousePositionY/@value + $offsetY}px;">
				<xsl:choose>
					<xsl:when test="$tooltipType/@value = 'layout.tooltipSituation'">
						<f:thunk name="printTooltipSituation">
							<f:with-param name="tooltip"><xsl:copy-of select="$tooltip" /></f:with-param>
						</f:thunk>
					</xsl:when>
					<xsl:otherwise>
						
					</xsl:otherwise>
				</xsl:choose>
			</html:div>			
		</html:div>
	</xsl:template>
	
	<f:function name="printTooltipSituation">
		<f:param name="tooltip" />
		<f:derived name="situation" from="tooltip">
			<get what="situation" />
		</f:derived>
		
		<xsl:template>
			<html:div>
				from
				<f:thunk url="printContent.xml">
					<f:with-param name="focus"><xsl:copy-of select="$situation" /></f:with-param>
					<f:with-param name="style"><f:string value="inline" /></f:with-param>
				</f:thunk>
			</html:div>
		</xsl:template>
	</f:function>
	
</f:function>