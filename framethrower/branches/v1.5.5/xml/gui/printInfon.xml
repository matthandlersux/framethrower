<f:function
	xmlns:f="http://www.filmsfolded.com/xsl/ui"
	xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
	xmlns:html="http://www.w3.org/1999/xhtml"
	xmlns:svg="http://www.w3.org/2000/svg">

	<f:param name="focus" />
	<f:derived name="relationContent" from="focus">
		<get what="relation" />
		<get what="content" />
	</f:derived>
	
	<xsl:template>
		<html:span>
			<xsl:if test="$relationContent">
				<html:div class="kernelInfon">
					<xsl:for-each select="$relationContent/node()">
						<xsl:choose>
							<xsl:when test="self::role">
								<f:thunk name="printrole">
									<f:with-param name="infon" value-id="{$focus/@id}" />
									<f:with-param name="role"><f:string value="{@role}" /></f:with-param>
								</f:thunk>
							</xsl:when>
							<xsl:otherwise>
								<xsl:variable name="value" select="translate(normalize-space(.),' ','')" />
								<xsl:if test="$value != ''">
									<html:div class="kernelObject" style="float: left; background-color:#e09;">
										<xsl:value-of select="$value" />
									</html:div>
								</xsl:if>
							</xsl:otherwise>
						</xsl:choose>
					</xsl:for-each>
					<html:br style="clear:both" />
				</html:div>
			</xsl:if>
		</html:span>
	</xsl:template>
	
	<f:function name="printrole">
		<f:param name="infon" />
		<f:param name="role" />
		<f:derived name="arg" from="infon">
			<get what="arcs" />
			<getkey key="role" />
		</f:derived>
		
		<xsl:template>
			<html:span>
				<xsl:if test="$arg">
					<f:thunk url="printObject.xml">
						<f:with-param name="focus" value-id="{$arg/@id}" />
					</f:thunk>
				</xsl:if>
			</html:span>
		</xsl:template>
	</f:function>
</f:function>